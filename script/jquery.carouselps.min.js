/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~                   Carousel Plugin                   ~~
~~           Leon Slater, www.lpslater.co.uk           ~~
~~                    Version 1.1.0                    ~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/
(function(e){e.fn.carouselps=function(t){var n={fade:false,continuous:true,auto_slide:true,auto_direction:"next",arrow_nav:true,bottom_nav:true,custom_bottom_nav:false,use_css3:true,swipe:true,responsive:true,adjust_height:false,slide_delay:2500,animate_speed:500,load_callback:function(){},slide_callback:function(){},bottom_nav_click:function(){},arrow_click:function(){}};t=e.extend({},n,t);return this.each(function(){var n=e(this),r=n.children("li"),i=n.children("li:first-child"),s=n.children("li:last-child"),o=n.find(".current"),u,a,f,l,c,h,p,d,v,m=false,g=false,y,b=false,w=false,E,S,x,T=/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent.toLowerCase());var N={init:function(){n.addClass("carouselps").wrap("<div class='carouselps-wrapper'><div class='carouselps-wrap'/></div>");h=n.parents(".carouselps-wrapper");c=n.parent();i.addClass("current");if(t.arrow_nav){N.arrow_nav()}if(t.bottom_nav){N.bottom_nav()}if(t.fade){N.fade()}if(t.continuous){N.continuous()}o=n.find(".current");if(t.use_css3){N.use_css3()}N.calcs();if(t.auto_slide){N.auto_slide()}if(t.swipe){N.swipe()}if(typeof t.load_callback=="function"){t.load_callback(n)}},fade:function(){t.continuous=t.use_css3=false;t.adjust_height=true;r.css({position:"absolute",opacity:"0","z-index":"1"});i.css({opacity:"1","z-index":"2"})},use_css3:function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var r in t){if(e.style[t[r]]!=undefined){g=true;S=t[r].replace("Perspective","").toLowerCase();E="-"+S+"-transform";n.css("-"+S+"-transition","-"+S+"-transform 0s ease-out")}}},calcs:function(){r.width(c.width());u=o.position().left*-1;if(!t.fade){if(t.use_css3&&g){n.css("-"+S+"-transition-duration","0s");n.css(E,"translate3d("+u+"px, 0, 0)")}else{n.css("margin-left",""+u+"px")}}if(t.adjust_height){n.height(o.height())}},continuous:function(){n.prepend(r.clone(true).removeClass("current").addClass("clone")).append(r.clone(true).removeClass("current").addClass("clone"));f=i.prev("li");l=s.next("li");a=n.children("li.clone");r=n.children("li")},before_anim:function(){o.removeClass("current");switch(y){case"prev":if(!i.is(o)||t.continuous){o.prev().addClass("current")}else{s.addClass("current")}break;case"next":if(!s.is(o)||t.continuous){o.next().addClass("current")}else{i.addClass("current")}break;case"bottom":var e=t.continuous?v+a.length/2:v;r.eq(e).addClass("current");break;case"default":o.addClass("current");break}o=n.find(".current")},animate:function(){if(!m){m=true;N.before_anim();u=o.position().left*-1;if(t.use_css3&&g){n.css("-"+S+"-transition-duration",t.animate_speed/1e3+"s").css(E,"translate3d("+u+"px, 0, 0)").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",N.after_anim)}else{if(t.fade){r.css("z-index","1");o.css("z-index","2").animate({opacity:"1"},t.animate_speed,function(){N.after_anim()})}else{n.animate({marginLeft:u},t.animate_speed,N.after_anim)}}if(t.bottom_nav){d.removeClass("current");var e=t.continuous?l.hasClass("current")?0:o.index()-a.length/2:o.index();d.eq(e).addClass("current")}if(t.adjust_height&&n.height()!=o.height()){n.animate({height:o.height()},{duration:t.animate_speed,queue:false})}}if(t.auto_slide){b=false}},after_anim:function(){if(t.continuous){if(f.hasClass("current")||l.hasClass("current")){u=f.hasClass("current")?s.position().left*-1:i.position().left*-1;if(t.use_css3&&g){n.css("-"+S+"-transition-duration","0s");n.css(E,"translate3d("+u+"px, 0, 0)")}else{n.css("margin-left"," "+u+"px")}if(f.hasClass("current")){s.addClass("current")}if(l.hasClass("current")){i.addClass("current")}o.removeClass("current");cloneUsed=true}o=n.find(".current")}if(t.fade){r.not(o).css("opacity","0")}m=false;if(t.auto_slide&&!w){if(x){clearTimeout(x)}y=t.auto_direction;x=setTimeout(N.animate,t.slide_delay)}if(typeof t.slide_callback=="function"){t.slide_callback(n)}},auto_slide:function(){y=t.auto_direction;x=setTimeout(N.animate,t.slide_delay);h.hover(function(){w=true;if(x){clearTimeout(x)}},function(){w=false;if(!b){y=t.auto_direction;x=setTimeout(N.animate,t.slide_delay)}})},swipe:function(){function L(t){if(!m){if(v?t.originalEvent.pointerType==="touch":b?t.originalEvent.pointerType===2:!t.originalEvent.touches[1]){if(p==0){p=1;w=v||b?t.originalEvent:t.originalEvent.touches[0];e=w.clientX;r=w.clientY;n.css("-"+S+"-transition-duration","0s")}}}}function A(f){if(p!=0){w=v||b?f.originalEvent:f.originalEvent.touches[0];l=w.clientX-e;h=w.clientY-r;if(p==1){d=Math.abs(l)<Math.abs(h)}if(!d){f.preventDefault();if(t.auto_slide){clearTimeout(x)}p=2;if(g){a=u+l;n.css(E,"translate3d("+a+"px,0,0)")}else if(t.fade){var m=l>0?o.is(i)?s:o.prev("li"):l<0?o.is(s)?i:o.next("li"):o;m.css({"z-index":"3",opacity:0+Math.abs(l)/c.innerWidth()})}}else{p=0}}}function O(t){if(p==2){if(l>80){y="prev"}else if(l<-80){y="next"}else{y="default"}N.animate();e=0,r=0,a=0,f=0,l=0,h=0,p=0,d=true}}var e=0,r=0,a=0,f=0,l=0,h=0,p=0,d=true,v=window.navigator.pointerEnabled,b=window.navigator.msPointerEnabled,w,T=v?"pointerdown":b?"MSPointerDown":"touchstart",C=v?"pointermove":b?"MSPointerMove":"touchmove",k=v?"pointerup":b?"MSPointerUp":"touchend";if(v||b){n.css({"touch-action":"pan-y","-ms-touch-action":"pan-y"})}n.on(T,L).on(C,A).on(k,O)},arrow_nav:function(){c.append('<span class="carouselps-arrow prev" data-direction="prev"><a><</a></span><span class="carouselps-arrow next" data-direction="next"><a>></a></span>');$sliderBottomNavItem=c.find(".carouselps-arrow");$sliderBottomNavItem.bind("click",function(){y=e(this).data("direction");N.animate();if(typeof t.arrow_click=="function"){t.arrow_click(e(this),n)}})},bottom_nav:function(){if(typeof t.custom_bottom_nav=="object"){d=t.custom_bottom_nav;d.first().addClass("current")}else{h.append('<ul class="carouselps-nav-bottom"/>');p=h.find(".carouselps-nav-bottom");r.each(function(){p.append("<li><a></a></li>")});d=p.find("li");p.find("li:first-child").addClass("current")}d.bind("click",function(r){r.preventDefault();if(!e(this).hasClass("current")){v=e(this).index();y="bottom";N.animate();if(typeof t.bottom_nav_click=="function"){t.bottom_nav_click(e(this),n)}}})},youtube_exists:function(){var t=n.find("iframe");t.each(function(){var t=e(this);if(t.attr("src").toLowerCase().indexOf("youtube")>-1){var n=!isNaN(parseInt(t.attr("width"),10))?parseInt(t.attr("width"),10):t.width(),r=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),i=r/n*100+"%";t.removeAttr("width").removeAttr("height").wrap("<div class='video-wrapper' style='padding-bottom: "+i+"' />").css({position:"absolute",height:"100%",width:"100%",top:"0",left:"0"})}});t.hover(function(){if(x){clearTimeout(x)}b=true})}};N.init();e(window).bind("load",function(){if(n.find("iframe").length){N.youtube_exists()}if(t.adjust_height){n.height(o.height())}});if(t.responsive){var C,k=T?window.hasOwnProperty("orientation"):false,L=k?"orientationchange":"resize";e(window).bind(L,function(){if(C){clearTimeout(C)}C=setTimeout(N.calcs,100)})}})}})(jQuery)