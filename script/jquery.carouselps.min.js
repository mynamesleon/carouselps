/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~                   Carousel Plugin                   ~~
~~           Leon Slater, www.lpslater.co.uk           ~~
~~                    Version 1.1.0                    ~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/
(function(e){e.fn.carouselps=function(t){var n={fade:false,continuous:true,auto_slide:true,auto_direction:"next",arrow_nav:true,bottom_nav:true,use_css3:true,swipe:true,responsive:true,adjust_height:true,slideChangeSpeed:2500,animateSpeed:500,load_callback:function(){},slide_callback:function(){}};t=e.extend({},n,t);return this.each(function(){var n=e(this),r=n.children("li"),i=n.children("li:first-child"),s=n.children("li:last-child"),o=n.find(".current"),u,a,f,l,c,h,p,d,v=false,m=false,g,y=false,b=false,w,E,S,x=/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent.toLowerCase()),T=x?"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch:false;var N={init:function(){n.wrap("<div class='carouselps-wrapper'><div class='carouselps-wrap'/></div>");if(!n.hasClass("carouselps")){n.removeClass().addClass("carouselps")}c=n.parents(".carouselps-wrapper");l=n.parent();i.addClass("current");if(t.arrow_nav){N.arrow_nav()}if(t.bottom_nav){N.bottom_nav()}if(t.fade){N.fade()}if(t.continuous){N.continuous()}o=n.find(".current");if(t.use_css3){N.use_css3()}N.calcs();if(t.auto_slide){N.auto_slide()}if(t.swipe){N.swipe()}t.load_callback.call(this)},fade:function(){t.continuous=t.use_css3=false;t.adjust_height=true;r.css({position:"absolute",opacity:"0","z-index":"1"});i.css({opacity:"1","z-index":"2"})},use_css3:function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var r in t){if(e.style[t[r]]!=undefined){m=true;E=t[r].replace("Perspective","").toLowerCase();w="-"+E+"-transform";n.css("-"+E+"-transition","-"+E+"-transform 0s ease-out");return true}}},calcs:function(){r.width(l.innerWidth());u=o.position().left*-1;if(!t.fade){if(t.use_css3&&m){n.css("-"+E+"-transition-duration","0s");n.css(w,"translate3d("+u+"px, 0, 0)")}else{n.css("margin-left",""+u+"px")}}if(t.adjust_height){n.height(o.height())}},continuous:function(){i.clone(true).insertAfter(s).addClass("clone").removeClass("current");s.clone(true).insertBefore(i).addClass("clone");a=i.prev("li");f=s.next("li");r=n.children("li")},before_anim:function(){o.removeClass("current");switch(g){case"prev":if(!i.is(o)||t.continuous){o.prev().addClass("current")}else{s.addClass("current")}break;case"next":if(!s.is(o)||t.continuous){o.next().addClass("current")}else{i.addClass("current")}break;case"bottom":var e=t.continuous?d+1:d;r.eq(e).addClass("current");break;case"default":o.addClass("current");break}o=n.find(".current")},animate:function(){if(!v){v=true;N.before_anim();u=o.position().left*-1;if(t.use_css3&&m){n.css("-"+E+"-transition-duration",t.animateSpeed/1e3+"s").css(w,"translate3d("+u+"px, 0, 0)").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",N.after_anim)}else{if(t.fade){r.css("z-index","1");o.css("z-index","2").animate({opacity:"1"},t.animateSpeed,function(){N.after_anim()})}else{n.animate({marginLeft:u},t.animateSpeed,N.after_anim)}}if(t.bottom_nav){p.removeClass("current");var e=t.continuous?f.hasClass("current")?i.index()-1:o.index()-1:o.index();p.eq(e).addClass("current")}if(n.height()!=o.height()&&t.adjust_height){n.animate({height:o.height()},{duration:t.animateSpeed,queue:false})}}if(t.auto_slide){y=false}},after_anim:function(){if(t.continuous){if(a.hasClass("current")||f.hasClass("current")){u=a.hasClass("current")?s.position().left*-1:i.position().left*-1;if(t.use_css3&&m){n.css("-"+E+"-transition-duration","0s");n.css(w,"translate3d("+u+"px, 0, 0)")}else{n.css("margin-left"," "+u+"px")}if(a.hasClass("current")){s.addClass("current")}if(f.hasClass("current")){i.addClass("current")}o.removeClass("current");cloneUsed=true}o=n.find(".current")}if(t.fade){r.not(o).css("opacity","0")}t.slide_callback.call(this);v=false;if(t.auto_slide&&!b){if(S){clearTimeout(S)}g=t.auto_direction;S=setTimeout(N.animate,t.slideChangeSpeed)}},auto_slide:function(){g=t.auto_direction;S=setTimeout(N.animate,t.slideChangeSpeed);c.hover(function(){b=true;if(S){clearTimeout(S)}},function(){b=false;if(!y){g=t.auto_direction;S=setTimeout(N.animate,t.slideChangeSpeed)}})},swipe:function(){function k(t){if(y?!v:!t.originalEvent.touches[1]&&!v){if(p==0){p=1;b=y?t.originalEvent:t.originalEvent.touches[0];e=b.clientX;r=b.clientY;n.css("-"+E+"-transition-duration","0s")}}}function L(f){if(p!=0){b=y?f.originalEvent:f.originalEvent.touches[0];c=b.clientX-e;h=b.clientY-r;if(p==1){d=Math.abs(c)<Math.abs(h)}if(!d){f.preventDefault();if(t.auto_slide){clearTimeout(S)}p=2;if(m){a=u+c;n.css(w,"translate3d("+a+"px,0,0)")}else if(t.fade){var v=c>0?o.is(i)?s:o.prev("li"):c<0?o.is(s)?i:o.next("li"):o;v.css({"z-index":"3",opacity:0+Math.abs(c)/l.innerWidth()})}}}}function A(e){if(p==2){if(c>80){g="prev"}else if(c<-80){g="next"}else{g="default"}N.animate();O()}}function O(){e=0,r=0,a=0,f=0,c=0,h=0,p=0,d=true}var e=0,r=0,a=0,f=0,c=0,h=0,p=0,d=true,y=window.navigator.pointerEnabled,b,x=y?"pointerdown":"touchstart",T=y?"pointermove":"touchmove",C=y?"pointerup":"touchend";if(y){n.css("touch-action","pan-y")}n.on(x,k).on(T,L).on(C,A)},arrow_nav:function(){l.append('<ul class="carouselps-nav"><li class="prev"><a><</a></li><li class="next"><a>></a></li></ul>');$sliderBottomNavItem=l.find(".carouselps-nav li");$sliderBottomNavItem.bind("click",function(){g=e(this).attr("class");N.animate()})},bottom_nav:function(){c.append('<ul class="carouselps-nav-bottom"/>');h=c.find(".carouselps-nav-bottom");r.each(function(){h.append("<li><a></a></li>")});p=h.find("li");h.find("li:first-child").addClass("current");p.bind("click",function(){d=e(this).index();g="bottom";N.animate()})},youtube_exists:function(){var t=n.find("iframe");t.each(function(){var t=e(this);if(t.attr("src").toLowerCase().indexOf("youtube")>-1){var n=!isNaN(parseInt(t.attr("width"),10))?parseInt(t.attr("width"),10):t.width(),r=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),i=r/n*100+"%";t.removeAttr("width").removeAttr("height").wrap("<div class='video-wrapper' style='padding-bottom: "+i+"' />").css({position:"absolute",height:"100%",width:"100%",top:"0",left:"0"})}});t.hover(function(){if(S){clearTimeout(S)}y=true})}};N.init();e(window).bind("load",function(){if(n.find("iframe").length){N.youtube_exists()}if(t.adjust_height){n.height(o.height())}});if(t.responsive){var C,k=x?window.hasOwnProperty("orientation"):false,L=k?"orientationchange":"resize";e(window).bind(L,function(){if(C){clearTimeout(C)}C=setTimeout(function(){N.calcs()},100)})}})}})(jQuery)