/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~                   Carousel Plugin                   ~~
~~           Leon Slater, www.lpslater.co.uk           ~~
~~                    Version 1.1.0                    ~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/
(function(e){e.fn.carouselps=function(t){var n={fade:false,continuous:true,auto_slide:true,auto_direction:"next",arrow_nav:true,bottom_nav:true,use_css3:true,swipe:true,responsive:true,adjust_height:true,slideChangeSpeed:2500,animateSpeed:500,load_callback:function(){},slide_callback:function(){}};t=e.extend({},n,t);return this.each(function(){var n=e(this),r=n.children("li"),i=n.children("li:first-child"),s=n.children("li:last-child"),o=n.find(".current"),u,a,f,l,c,h,p,d=false,v=false,m,g=false,y=false,b,w,E,S=/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent.toLowerCase()),x=S?"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch:false,T=x?"touchend":"click";var N={init:function(){n.wrap("<div class='carouselps-wrapper'><div class='carouselps-wrap'/></div>");if(!n.hasClass("carouselps")){n.removeClass().addClass("carouselps")}l=n.parents(".carouselps-wrapper");f=n.parent();i.addClass("current");if(t.arrow_nav){N.arrow_nav()}if(t.bottom_nav){N.bottom_nav()}if(t.fade){N.fade()}if(t.continuous){N.continuous()}o=n.find(".current");if(t.use_css3){N.use_css3()}N.calcs();if(t.auto_slide){N.auto_slide()}if(t.swipe){N.swipe()}t.load_callback.call(this)},fade:function(){t.continuous=t.use_css3=false;t.adjust_height=true;r.css("position","absolute");r.hide();i.show()},use_css3:function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var r in t){if(e.style[t[r]]!=undefined){v=true;w=t[r].replace("Perspective","").toLowerCase();b="-"+w+"-transform";n.css("-"+w+"-transition","-"+w+"-transform 0s ease-out");return true}}},calcs:function(){r.width(f.innerWidth());if(!t.fade){if(t.use_css3&&v){n.css("-"+w+"-transition-duration","0s");n.css(b,"translate3d("+o.position().left*-1+"px, 0, 0)")}else{n.css("margin-left",""+o.position().left*-1+"px")}}if(t.adjust_height){n.height(o.height())}},continuous:function(){i.clone(true).insertAfter(s).addClass("clone").removeClass("current");s.clone(true).insertBefore(i).addClass("clone");u=i.prev("li");a=s.next("li");r=n.children("li")},before_anim:function(){o.removeClass("current");switch(m){case"prev":if(!i.hasClass("current")||t.continuous){o.prev().addClass("current")}else{s.addClass("current")}break;case"next":if(!s.hasClass("current")||t.continuous){o.next().addClass("current")}else{i.addClass("current")}break;case"bottom":var e=t.continuous?p+1:p;r.eq(e).addClass("current");break}o=n.find(".current")},animate:function(){if(!d){d=true;N.before_anim();if(t.use_css3&&v){n.css("-"+w+"-transition-duration",t.animateSpeed/1e3+"s").css(b,"translate3d("+o.position().left*-1+"px, 0, 0)").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",N.after_anim)}else{if(t.fade){r.fadeOut(t.animateSpeed);o.fadeIn(t.animateSpeed,N.after_anim)}else{n.animate({marginLeft:o.position().left*-1},t.animateSpeed,N.after_anim)}}if(t.bottom_nav){h.removeClass("current");var e=t.continuous?a.hasClass("current")?i.index()-1:o.index()-1:o.index();h.eq(e).addClass("current")}if(n.height()!=o.height()&&t.adjust_height){n.animate({height:o.height()},{duration:t.animateSpeed,queue:false})}}if(t.auto_slide){g=false}},after_anim:function(){if(t.continuous){if(u.hasClass("current")||a.hasClass("current")){var e=u.hasClass("current")?s.position().left*-1:i.position().left*-1;if(t.use_css3&&v){n.css("-"+w+"-transition-duration","0s");n.css(b,"translate3d("+e+"px, 0, 0)")}else{n.css("margin-left"," "+e+"px")}if(u.hasClass("current")){s.addClass("current")}if(a.hasClass("current")){i.addClass("current")}o.removeClass("current");cloneUsed=true}o=n.find(".current")}t.slide_callback.call(this);d=false;if(t.auto_slide&&!y){if(E){clearTimeout(E)}m=t.auto_direction;E=setTimeout(N.animate,t.slideChangeSpeed)}},auto_slide:function(){m=t.auto_direction;E=setTimeout(N.animate,t.slideChangeSpeed);l.hover(function(){y=true;if(E){clearTimeout(E)}},function(){y=false;if(!g){m=t.auto_direction;E=setTimeout(N.animate,t.slideChangeSpeed)}})},swipe:function(){function c(t){if(!t.originalEvent.touches[1]&&!d){g();if(f==0){f=1;e=t.originalEvent.touches[0].clientX;r=t.originalEvent.touches[0].clientY}}}function h(s){u=s.originalEvent.touches[0].clientX-e;a=s.originalEvent.touches[0].clientY-r;l=Math.abs(u)<Math.abs(a);if(!l){s.preventDefault();if(t.auto_slide){clearTimeout(E)}f=2;if(v){i=o.position().left*-1+u;n.css("-"+w+"-transition-duration","0s").css(b,"translate3d("+i+"px,0,0)")}}}function p(e){if(f==2){if(u>80){m="prev"}else if(u<-80){m="next"}else{m=null}N.animate()}}function g(){e=null,r=null,i=null,s=null,u=null,a=null,f=0,l=true}var e=null,r=null,i=null,s=null,u=null,a=null,f=0,l=true;n.on({touchstart:c,touchmove:h,touchend:p})},arrow_nav:function(){f.append('<ul class="carouselps-nav"><li class="prev"><a><</a></li><li class="next"><a>></a></li></ul>');$sliderBottomNavItem=f.find(".carouselps-nav li");$sliderBottomNavItem.bind(T,function(){m=e(this).attr("class");N.animate()})},bottom_nav:function(){l.append('<ul class="carouselps-nav-bottom"/>');c=l.find(".carouselps-nav-bottom");r.each(function(){c.append("<li><a></a></li>")});h=c.find("li");c.find("li:first-child").addClass("current");h.bind(T,function(){p=e(this).index();m="bottom";N.animate()})},youtube_exists:function(){var t=n.find("iframe");t.each(function(){var t=e(this);if(t.attr("src").toLowerCase().indexOf("youtube")>-1){var n=!isNaN(parseInt(t.attr("width"),10))?parseInt(t.attr("width"),10):t.width(),r=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),i=r/n*100+"%";t.removeAttr("width").removeAttr("height").wrap("<div class='video-wrapper' style='padding-bottom: "+i+"' />").css({position:"absolute",height:"100%",width:"100%",top:"0",left:"0"})}});t.hover(function(){if(E){clearTimeout(E)}g=true})}};N.init();e(window).bind("load",function(){if(n.find("iframe").length){N.youtube_exists()}if(t.adjust_height){n.height(o.height())}});if(t.responsive){var C,k=S?window.hasOwnProperty("orientation"):false,L=k?"orientationchange":"resize";e(window).bind(L,function(){if(C){clearTimeout(C)}C=setTimeout(function(){N.calcs()},100)})}})}})(jQuery)